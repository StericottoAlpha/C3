{% extends 'base.html' %}

{% block title %}æ²ç¤ºæ¿æŠ•ç¨¿ - C3 ã‚¹ãƒ†ãƒªã‚³ãƒƒãƒˆÎ±{% endblock %}

{% block content %}
<div class="min-h-screen bg-[#b9cfcc] relative overflow-hidden pb-44">

  <!-- èƒŒæ™¯ï¼šã†ã£ã™ã‚‰ç´™æ„Ÿ + ã‚°ãƒ©ãƒ‡ -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute inset-0 bg-gradient-to-b from-white/12 via-transparent to-black/5"></div>
    <div class="absolute inset-0 opacity-[0.06]"
         style="background-image: radial-gradient(rgba(0,0,0,.35) 0.6px, transparent 0.6px);
                background-size: 12px 12px;"></div>
  </div>

  <!-- èƒŒæ™¯è£…é£¾ï¼ˆæ§ãˆã‚ï¼šæ³¢ç´‹ï¼‹ãƒ‰ãƒƒãƒˆï¼‰ -->
  <div class="absolute inset-0 pointer-events-none z-0">
    <div class="absolute left-6 top-16 w-32 h-32 rounded-full border border-white/22"></div>
    <div class="absolute right-8 top-28 w-24 h-24 rounded-full border border-white/18"></div>
    <div class="absolute left-8 bottom-28 w-40 h-40 rounded-full border border-white/16"></div>
    <div class="absolute -right-14 -bottom-10 w-52 h-52 rounded-full border border-white/14"></div>

    <div class="absolute left-10 top-64 w-2 h-2 rounded-full bg-[#2f2f2f]/16"></div>
    <div class="absolute left-24 top-80 w-1.5 h-1.5 rounded-full bg-[#2f2f2f]/20"></div>
    <div class="absolute right-16 top-72 w-1.5 h-1.5 rounded-full bg-[#2f2f2f]/20"></div>
    <div class="absolute right-10 bottom-72 w-2 h-2 rounded-full bg-[#2f2f2f]/14"></div>
    <div class="absolute left-16 bottom-80 w-1.5 h-1.5 rounded-full bg-[#2f2f2f]/18"></div>
  </div>

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <div class="relative z-10 max-w-3xl mx-auto px-4 pt-8">
    <div class="flex items-start justify-between gap-3">
      <!-- æˆ»ã‚‹ -->
      <a href="{% url 'bbs:list' %}"
         class="shrink-0 inline-flex items-center gap-2 text-[#2f2f2f] bg-white/60 hover:bg-white/80
                border border-white/60 rounded-full px-4 py-2 shadow-sm transition">
        <span class="text-lg">â†</span>
        <span class="text-sm font-semibold">æˆ»ã‚‹</span>
      </a>

      <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
      <div class="flex-1 text-right">
        <h1 class="text-2xl sm:text-3xl font-bold text-[#2f2f2f] tracking-wide">æ²ç¤ºæ¿æŠ•ç¨¿</h1>
        <p class="mt-1 text-sm text-white/90">ãƒãƒ¼ãƒ ã¸å…±æœ‰ã—ãŸã„å†…å®¹ã‚’æŠ•ç¨¿ã—ã¾ã™</p>
      </div>
    </div>

    <!-- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
    {% if messages %}
      <div class="mt-5 space-y-3">
        {% for message in messages %}
          <div class="rounded-2xl px-4 py-3 shadow-sm border border-white/60 bg-white/70
                      {% if message.tags == 'error' %}text-rose-800{% else %}text-emerald-800{% endif %}">
            <p class="text-sm font-semibold">
              {% if message.tags == 'error' %}âš ï¸{% else %}âœ…{% endif %}
              {{ message }}
            </p>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <!-- æœ¬ä½“ã‚«ãƒ¼ãƒ‰ -->
  <div class="relative z-10 max-w-3xl mx-auto px-4 mt-6">
    <div class="bg-white/75 border border-white/70 rounded-2xl shadow-[0_16px_40px_rgba(0,0,0,0.14)] overflow-hidden">
      <div class="px-5 sm:px-7 py-6">

        <!-- æŠ•ç¨¿è€…æƒ…å ± -->
        <div class="rounded-2xl border border-black/10 bg-white/55 p-4 mb-6">
          <div class="flex items-start gap-3">
            <div class="w-12 h-12 rounded-2xl bg-black/5 flex items-center justify-center">
              <span class="text-xl">ğŸ‘¤</span>
            </div>
            <div class="flex-1">
              <p class="text-sm font-bold text-[#2f2f2f]">æŠ•ç¨¿è€…æƒ…å ±</p>
              <div class="mt-2 text-sm text-[#2f2f2f]/80 space-y-1">
                <p><span class="font-semibold text-[#2f2f2f]">ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼š</span>{{ user.user_id }}</p>
                <p><span class="font-semibold text-[#2f2f2f]">åº—èˆ—ï¼š</span>{{ user.store.store_name }}</p>
              </div>
            </div>
          </div>
        </div>

        <form method="post" class="space-y-6" id="bbsPostForm">
          {% csrf_token %}

          <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
          <div>
            <div class="flex items-center justify-between mb-2">
              <label for="{{ form.title.id_for_label }}" class="text-sm font-bold text-[#2f2f2f]">
                ã‚¿ã‚¤ãƒˆãƒ«
              </label>
              <span class="text-[11px] font-bold px-2 py-0.5 rounded-full bg-rose-100 text-rose-700 border border-rose-200">
                å¿…é ˆ
              </span>
            </div>
            <div class="rounded-xl border border-black/10 bg-white/70 px-3 py-2 focus-within:ring-2 focus-within:ring-black/10">
              {{ form.title }}
            </div>
            {% if form.title.errors %}
              <p class="mt-2 text-sm text-rose-700 font-semibold">âš ï¸ {{ form.title.errors.0 }}</p>
            {% endif %}
          </div>

          <!-- ã‚¸ãƒ£ãƒ³ãƒ« -->
          <div>
            <div class="flex items-center justify-between mb-2">
              <label for="{{ form.genre.id_for_label }}" class="text-sm font-bold text-[#2f2f2f]">
                ã‚¸ãƒ£ãƒ³ãƒ«
              </label>
              <span class="text-[11px] font-bold px-2 py-0.5 rounded-full bg-rose-100 text-rose-700 border border-rose-200">
                å¿…é ˆ
              </span>
            </div>
            <div class="rounded-xl border border-black/10 bg-white/70 px-3 py-2 focus-within:ring-2 focus-within:ring-black/10">
              {{ form.genre }}
            </div>
            {% if form.genre.errors %}
              <p class="mt-2 text-sm text-rose-700 font-semibold">âš ï¸ {{ form.genre.errors.0 }}</p>
            {% endif %}
          </div>

          <!-- å†…å®¹ -->
          <div>
            <div class="flex items-center justify-between mb-2">
              <label for="{{ form.content.id_for_label }}" class="text-sm font-bold text-[#2f2f2f]">
                å†…å®¹
              </label>
              <span class="text-[11px] font-bold px-2 py-0.5 rounded-full bg-rose-100 text-rose-700 border border-rose-200">
                å¿…é ˆ
              </span>
            </div>
            <div class="rounded-xl border border-black/10 bg-white/70 px-3 py-2 focus-within:ring-2 focus-within:ring-black/10">
              {{ form.content }}
            </div>
            {% if form.content.errors %}
              <p class="mt-2 text-sm text-rose-700 font-semibold">âš ï¸ {{ form.content.errors.0 }}</p>
            {% endif %}
          </div>

          <!-- é–¢é€£æ—¥å ±ï¼ˆä»»æ„ï¼‰ -->
          <div>
            <div class="flex items-center justify-between mb-2">
              <label for="{{ form.report.id_for_label }}" class="text-sm font-bold text-[#2f2f2f]">
                é–¢é€£ã™ã‚‹æ—¥å ±
              </label>
              <span class="text-[11px] font-bold px-2 py-0.5 rounded-full bg-black/5 text-[#2f2f2f]/70 border border-black/10">
                ä»»æ„
              </span>
            </div>
            <div class="rounded-xl border border-black/10 bg-white/70 px-3 py-2 focus-within:ring-2 focus-within:ring-black/10">
              {{ form.report }}
            </div>
            {% if form.report.help_text %}
              <p class="mt-2 text-xs text-[#2f2f2f]/60">{{ form.report.help_text }}</p>
            {% endif %}
            {% if form.report.errors %}
              <p class="mt-2 text-sm text-rose-700 font-semibold">âš ï¸ {{ form.report.errors.0 }}</p>
            {% endif %}
          </div>

          <!-- âœ… ä¸‹éƒ¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒœãƒˆãƒ ãƒŠãƒ“ã¨è¢«ã‚‰ãªã„ï¼‰ -->
          <div class="pt-2">
            <div class="sticky bottom-24">
              <div class="bg-white/80 backdrop-blur border border-white/70 rounded-2xl
                          shadow-[0_12px_24px_rgba(0,0,0,0.16)] p-3 flex items-center gap-3">
                <a href="{% url 'bbs:list' %}"
                   class="flex-1 text-center py-3 rounded-xl border border-black/10 bg-white/70 hover:bg-white transition
                          font-bold text-[#2f2f2f]">
                  ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </a>
                <button type="submit"
                        class="flex-[1.2] py-3 rounded-xl bg-primary hover:bg-primary-dark text-white transition
                               font-bold shadow">
                  æŠ•ç¨¿ã™ã‚‹
                </button>
              </div>
            </div>
          </div>

        </form>

      </div>
    </div>
  </div>

</div>
{% endblock %}
