{% extends "base.html" %}
{% block content %}

<div aria-hidden="true"
     class="fixed inset-0 -z-10 overflow-hidden pointer-events-none"
     style="background:#c8d8d6;">
</div>

<div class="max-w-2xl mx-auto px-4 sm:px-6 pt-6 pb-28">
  <div class="p-0 sm:p-2">

    <div class="flex items-center gap-3 mb-4">
      <a href="javascript:history.back()"
         class="inline-flex items-center justify-center h-10 w-10 rounded-xl border border-gray-200 bg-white
                text-gray-700 hover:bg-gray-50 transition shadow-sm"
         aria-label="戻る">
        <span class="text-xl leading-none">←</span>
      </a>
    </div>

    <div class="rounded-2xl bg-white border border-gray-200 shadow-sm overflow-hidden">
      
      <div class="px-5 sm:px-6 py-5 bg-gray-50/50 border-b border-gray-100/50">
        <div class="flex items-center gap-3">
          <div class="w-1.5 h-6 bg-teal-500 rounded-full"></div>
          <h1 class="text-xl sm:text-2xl font-extrabold text-gray-900 tracking-tight">できごと詳細</h1>
        </div>
      </div>

      <div class="p-5 sm:p-6 border-b border-gray-100">
        <div class="flex items-start gap-4">
          <div class="shrink-0 h-14 w-14 rounded-full bg-gray-100 grid place-items-center text-gray-600 font-extrabold shadow-inner">
            {{ genre_label|slice:":1"|default:"?" }}
          </div>

          <div class="min-w-0 flex-1">
            {% if genre_key == "claim" %}
              <span class="inline-flex items-center rounded-full bg-red-50 text-red-700 ring-1 ring-red-200 px-3 py-1 text-xs font-bold">
                {{ genre_label }}
              </span>
            {% elif genre_key == "trouble" %}
              <span class="inline-flex items-center rounded-full bg-amber-50 text-amber-700 ring-1 ring-amber-200 px-3 py-1 text-xs font-bold">
                事故
              </span>
            {% elif genre_key == "praise" %}
              <span class="inline-flex items-center rounded-full bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 px-3 py-1 text-xs font-bold">
                {{ genre_label }}
              </span>
            {% elif genre_key == "report" %}
              <span class="inline-flex items-center rounded-full bg-sky-50 text-sky-700 ring-1 ring-sky-200 px-3 py-1 text-xs font-bold">
                {{ genre_label }}
              </span>
            {% else %}
              <span class="inline-flex items-center rounded-full bg-violet-50 text-violet-700 ring-1 ring-violet-200 px-3 py-1 text-xs font-bold">
                {{ genre_label }}
              </span>
            {% endif %}

            <div class="mt-3 text-lg sm:text-xl font-bold text-gray-900 break-words leading-snug">
              {{ report.title|default:"（タイトル未設定）" }}
            </div>

            <div class="mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500">
              <div class="inline-flex items-center gap-1.5">
                <span class="font-bold text-gray-400">場所</span>
                <span class="font-semibold text-gray-800">{{ report.place|default:"-" }}</span>
              </div>
              <div class="inline-flex items-center gap-1.5">
                <span class="font-bold text-gray-400">日時</span>
                <span class="font-semibold text-gray-700">{{ dt_label }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="p-5 sm:p-6 bg-white">
        <div class="rounded-xl border border-gray-100 bg-gray-50/50 p-4 sm:p-5">
          <div class="text-xs font-bold text-gray-400 mb-3 uppercase tracking-widest">内容</div>
          <div class="text-sm text-gray-900 leading-relaxed whitespace-pre-wrap break-words">{{ report.body|default:report.content|default:"（本文なし）" }}</div>
        </div>
      </div>
    </div>

  </div>
</div>

{% endblock %}